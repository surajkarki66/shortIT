(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{184:function(e,t,a){},202:function(e,t,a){},203:function(e,t,a){},205:function(e,t,a){},285:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),n=a(29),c=a.n(n),o=a(26),i=(a(184),a(80)),l=a.n(i),d=a(102),j=a(12),u=a(161),b=a.n(u).a.create({baseURL:"https://shortit6.herokuapp.com",withCredentials:!0}),m=(a(202),a(203),a(1)),h=function(){return Object(m.jsx)("footer",{children:Object(m.jsx)("p",{children:"Copyright \xa9 2021 by ShortIT. All rights reserved."})})},O=a(6),f=a(65),p=a(294),x=(a(205),a(291)),g=a(296),v=a(297),y=x.a.SubMenu,w=Object(j.i)((function(e){var t=Object(j.g)(),a=e.logoutClickHandler,s=e.mode,n=e.authData,c=e.fullName,i=n.token,l=Object(m.jsxs)(x.a,{defaultSelectedKeys:[t.pathname],mode:s,children:[Object(m.jsx)(x.a.Item,{style:{borderBottom:"none"},children:Object(m.jsx)(o.b,{to:"/register",children:"Register"})},"register"),Object(m.jsx)(x.a.Item,{style:{borderBottom:"none"},children:Object(m.jsx)(o.b,{to:"/login",children:"Login"})},"login")]});return i&&(l=Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(x.a,{defaultSelectedKeys:[t.pathname],mode:s,children:[Object(m.jsx)(x.a.Item,{style:{borderBottom:"none"},children:Object(m.jsx)(f.a,{type:"primary",children:Object(m.jsxs)(o.b,{to:"/link/create",children:[Object(m.jsx)(g.a,{}),"Create"]})})},"create"),Object(m.jsxs)(y,{icon:Object(m.jsx)(v.a,{}),title:c||"Profile",style:{color:"#87ceeb"},children:[Object(m.jsx)(x.a.Item,{children:Object(m.jsx)(o.b,{to:"/profile",children:"Profile Settings"})},"profile_settings"),Object(m.jsx)(x.a.Item,{children:Object(m.jsx)(o.b,{to:"/account-setting",children:"Account Settings"})},"account_settings"),Object(m.jsx)(x.a.Item,{children:Object(m.jsx)(o.b,{to:"/",onClick:a,children:"Log Out"})},"logout")]},"/")]})})),Object(m.jsx)(r.a.Fragment,{children:l})})),S=a.p+"static/media/logo.3c82922e.svg",C=Object(s.createContext)({}),N=function(e){var t=Object(s.useState)(""),a=Object(O.a)(t,2),r=a[0],n=a[1],c=Object(s.useState)(""),o=Object(O.a)(c,2),i=o[0],j=o[1],u=Object(s.useState)(""),h=Object(O.a)(u,2),f=h[0],p=h[1],x=Object(s.useState)(""),g=Object(O.a)(x,2),v=g[0],y=g[1],w=Object(s.useState)(""),S=Object(O.a)(w,2),N=S[0],k=S[1],P=Object(s.useState)(""),F=Object(O.a)(P,2),E=F[0],T=F[1],I=Object(s.useState)(""),A=Object(O.a)(I,2),R=A[0],z=A[1],L=Object(s.useState)(""),U=Object(O.a)(L,2),_=U[0],q=U[1],B=Object(s.useState)(),D=Object(O.a)(B,2),W=D[0],H=D[1],X=Object(s.useState)(),V=Object(O.a)(X,2),Z=V[0],M=V[1],J=Object(s.useState)(),K=Object(O.a)(J,2),Y=K[0],G=K[1],Q=Object(s.useState)(""),$=Object(O.a)(Q,2),ee=$[0],te=$[1];return Object(s.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var t,a,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/api/users/loggedIn");case 2:if(t=e.sent,!(a=t.data)){e.next=36;break}if(n(a),""===r){e.next=36;break}return e.prev=7,e.next=10,b.get("/api/users/me",{headers:{Authorization:"Bearer ".concat(r)}});case 10:s=e.sent,c=s.data.data,j(c._id),p(c.firstName+" "+c.lastName),y(c.firstName),k(c.lastName),T(c.email),z(c.role),H(c.createdAt),M(c.updatedAt),G(c.urls),q(c.status),e.next=36;break;case 24:e.prev=24,e.t0=e.catch(7),j(""),p(""),y(""),k(""),T(""),z(""),H(void 0),M(void 0),G(void 0),q("");case 36:case"end":return e.stop()}}),e,null,[[7,24]])})));return function(){return e.apply(this,arguments)}})()()}),[r]),Object(m.jsx)(C.Provider,{value:{token:r,setToken:n,userId:i,setUserId:j,status:_,setStatus:q,fullName:f,setFullName:p,firstName:v,setFirstName:y,lastName:N,setLastName:k,email:E,setEmail:T,role:R,setRole:z,createdAt:W,setCreatedAt:H,updatedAt:Z,setUpdatedAt:M,urls:Y,setUrls:G,csrfToken:ee,setCsrfToken:te},children:e.children})},k=Object(j.i)((function(e){var t=Object(s.useState)(!1),a=Object(O.a)(t,2),r=a[0],n=a[1],c=Object(s.useContext)(C),i=c.token,l=c.setToken,d=c.fullName,j={token:i},u=function(t){t.preventDefault(),b.get("/api/users/logout").then((function(t){var a=t.data;l(a),e.history.push("/")}))};return Object(m.jsxs)("nav",{className:"menu",style:{position:"fixed",zIndex:1,width:"100%"},children:[Object(m.jsx)("div",{className:"menu__logo",children:Object(m.jsx)(o.b,{to:"/",children:Object(m.jsx)("img",{src:S,alt:"Logo",style:{width:"100%",height:"100%",borderRadius:"5px",border:"2 px solid"}})})}),Object(m.jsx)(o.b,{to:"/",children:Object(m.jsx)("div",{className:"menu__title",children:Object(m.jsx)("h2",{children:"ShortIT"})})}),Object(m.jsxs)("div",{className:"menu__container",children:[Object(m.jsx)("div",{className:"menu_right",children:Object(m.jsx)(w,{mode:"horizontal",logoutClickHandler:u,authData:j,fullName:d})}),Object(m.jsx)(f.a,{className:"menu__mobile-button",type:"primary",onClick:function(){n(!0)},children:"MENU"}),Object(m.jsx)(p.a,{title:"MENU ITEMS",placement:"right",className:"menu_drawer",closable:!0,onClose:function(){n(!1)},visible:r,children:Object(m.jsx)(w,{mode:"inline",logoutClickHandler:u,authData:j,fullName:d})})]})]})})),P=a(289),F=a(290),E=function(e){var t=e.form,a=e.formSubmitHandler,s=e.loading,r=e.urlError;return Object(m.jsxs)("div",{className:"url-form",children:[Object(m.jsx)("h2",{style:{textTransform:"uppercase"},children:"Short your freaking long URL"}),""!==r&&Object(m.jsx)("h4",{style:{color:"red"},children:r}),Object(m.jsxs)(P.a,{form:t,onFinish:function(e){return a(e)},children:[Object(m.jsx)(P.a.Item,{name:"Url",rules:[{required:!0,message:"Please input your freaky long url!"}],children:Object(m.jsx)(F.a,{style:{width:"50%"},type:"text",placeholder:"Enter the freaking long url",size:"large",allowClear:!0,id:"urlInput"})}),Object(m.jsx)("div",{style:{marginTop:"20px"},children:Object(m.jsx)(f.a,{size:"large",type:"primary",loading:s,htmlType:"submit",children:s?"":"Shorten"})})]})]})},T=a(178),I=a(119),A=a(298),R=function(e){var t=e.url,a=Object(s.useState)(!1),r=Object(O.a)(a,2),n=r[0],c=r[1];Object(s.useEffect)((function(){n&&T.a.success({message:"Copied"})}),[n]);return Object(m.jsxs)("div",{className:"urlResponse",children:[Object(m.jsx)("h1",{children:"Your short URL:"}),Object(m.jsxs)("h2",{style:{color:"blue"},children:[null===t||void 0===t?void 0:t.shortUrl,"\xa0\xa0"," ",Object(m.jsx)(I.CopyToClipboard,{text:t.shortUrl,onCopy:function(){c(!0),setTimeout((function(){c(!1)}),1e3)},children:Object(m.jsx)(A.a,{style:{fontSize:"20px",color:"black"}})})," "]}),Object(m.jsx)("h3",{children:String(new Date(t.createdAt))})]})},z=function(){var e=Object(s.useContext)(C).csrfToken,t=Object(s.useState)(),a=Object(O.a)(t,2),n=a[0],c=a[1],o=Object(s.useState)(!1),i=Object(O.a)(o,2),l=i[0],d=i[1],j=Object(s.useState)(""),u=Object(O.a)(j,2),h=u[0],f=u[1],p=P.a.useForm(),x=Object(O.a)(p,1)[0],g=function(t){b.defaults.headers.post["X-CSRF-Token"]=e,b.post("/api/url/generateGuestUrl",t).then((function(e){var t=e.data;c(t.data),d(!1),f(""),x.resetFields()})).catch((function(e){var t=e.response.data;f(t.data.error),d(!1),c(void 0),x.resetFields()}))};return Object(m.jsx)(r.a.Fragment,{children:Object(m.jsxs)("div",{className:"landingPage",children:[Object(m.jsx)(E,{form:x,formSubmitHandler:function(e){if(e){var t={longUrl:e.Url};d(!0),g(t)}},loading:l,urlError:h}),n&&!l&&Object(m.jsx)(R,{url:n})]})})},L=a(287),U=a(292),_=a(81),q=a(51),B=a(95),D=a(141),W=a.n(D),H=a(288),X=a(299),V=function(e){var t=e.fullName,a=e.deleteConfirm,r=e.url,n=r._id,c=r.createdAt,i=r.title,l=r.shortUrl,d=r.longUrl,j=r.accessedDates,u=Object(s.useState)(!1),b=Object(O.a)(u,2),h=b[0],p=b[1];return Object(s.useEffect)((function(){h&&T.a.success({message:"Copied"})}),[h]),Object(m.jsx)(H.a,{children:Object(m.jsxs)(_.a,{children:[Object(m.jsxs)(q.a,{children:[Object(m.jsxs)("h4",{style:{color:"#666666"},children:["CREATED \xa0\xa0",W()(c).format("LLL"),"\xa0 | \xa0"," ",Object(m.jsx)("p",{style:{display:"inline",color:"#5280e9"},children:t})," "]}),Object(m.jsx)("h2",{children:i||d}),Object(m.jsx)("h4",{style:{color:"#666666"},children:d}),Object(m.jsx)("br",{}),Object(m.jsx)("a",{rel:"noreferrer",href:l,target:"_blank",children:l.slice(8)})]}),Object(m.jsxs)(q.a,{span:24,children:[Object(m.jsxs)("h3",{style:{float:"right"},children:[" ",j&&j.length,"\xa0\xa0\xa0",Object(m.jsx)(X.a,{}),j&&j.length>=1?Object(m.jsx)("p",{style:{fontSize:12},children:W()(j[j.length-1]).fromNow()}):Object(m.jsx)("p",{style:{fontSize:12},children:"Not Accessed"})]}),Object(m.jsx)(I.CopyToClipboard,{text:l,onCopy:function(){p(!0),setTimeout((function(){p(!1)}),1e3)},children:Object(m.jsx)(f.a,{type:"primary",size:"small",style:{marginRight:20,fontSize:10,marginTop:20},children:"COPY"})}),Object(m.jsx)(f.a,{size:"small",style:{marginRight:20,fontSize:10},children:Object(m.jsx)(o.b,{to:"/link/edit/".concat(n),children:"EDIT"})}),Object(m.jsx)(f.a,{onClick:function(){return a(n)},type:"link",size:"small",style:{marginRight:20,fontSize:10,color:"red"},children:"DELETE"})]})]})})},Z=Object(j.i)((function(e){var t=Object(s.useContext)(C),a=t.fullName,r=t.token,n=t.csrfToken,c=Object(s.useState)(!1),o=Object(O.a)(c,2),i=o[0],l=o[1],d=Object(s.useState)(!1),j=Object(O.a)(d,2),u=j[0],h=j[1];Object(s.useEffect)((function(){u&&e.history.push("/home")}),[u,e.history]);var f=function(e){U.a.confirm({title:"Are you sure to delete this link ?",icon:Object(m.jsx)(B.a,{}),content:" Then you will permanently loose this link.",okText:"Submit",cancelText:"Cancel",onOk:function(){return function(e){l(!0),b.defaults.headers.delete["X-CSRF-Token"]=n,b.delete("/api/url/deleteUrl/".concat(e),{headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){h(!0),l(!1)})).catch((function(e){l(!1)}))}(e)}})},p=e.urls;return Object(m.jsx)(_.a,{children:p&&0!==p.length?p.map((function(e){return Object(m.jsx)(q.a,{span:24,children:Object(m.jsx)(V,{url:e,loading:i,fullName:a,deleteConfirm:f},e._id)},e._id)})):Object(m.jsx)("p",{style:{textAlign:"center",fontSize:"20px"},children:"No Links"})})})),M=function(){var e=Object(s.useContext)(C),t=e.token,a=e.setStatus,r=e.setFullName,n=e.urls,c=e.setUrls,o=Object(s.useState)(!1),i=Object(O.a)(o,2),l=i[0],d=i[1];return Object(s.useEffect)((function(){t&&(d(!0),b.get("/api/users/me",{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){var t=e.data;c(t.data.urls),a(t.data.status),r(t.data.firstName+" "+t.data.lastName),d(!1)})).catch((function(e){d(!1)})))}),[r,a,t,c]),Object(m.jsx)("div",{className:"landingPage",children:n&&!l?Object(m.jsx)(Z,{urls:n}):Object(m.jsx)("div",{className:"spin",children:Object(m.jsx)(L.a,{tip:"Loading...",size:"large"})})})},J=a(60),K=a(36),Y=a(295),G=function(e){var t=e.loading,a=e.registerError,s=e.onFinish,r=e.onChangeHandler,n={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};return Object(m.jsxs)(P.a,Object(K.a)(Object(K.a)({style:{minWidth:"405px",fontWeight:"bold"}},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}}),{},{name:"register",initialValues:{remember:!0},onFinish:s,children:[""!==a&&Object(m.jsx)("h4",{style:{color:"red"},children:a}),Object(m.jsx)(P.a.Item,{label:"First-Name",name:"firstName",rules:[{required:!0,message:"Please input your First Name"},{min:2,message:"First Name should be more than 1 character"},{max:32,message:"First Name should be less than 32 character"}],children:Object(m.jsx)(F.a,{name:"firstName",onChange:function(e){return r(e)}})}),Object(m.jsx)(P.a.Item,{label:"Last-Name",name:"lastName",rules:[{required:!0,message:"Please input your Last Name"},{min:2,message:"Last Name should be more than 1 character"},{max:32,message:"Last Name should be less than 32 character"}],children:Object(m.jsx)(F.a,{name:"lastName",onChange:function(e){return r(e)}})}),Object(m.jsx)(P.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(m.jsx)(F.a,{name:"email",onChange:function(e){return r(e)}})}),Object(m.jsx)(P.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"},{min:6,message:"Password should be more than 5 character"},{pattern:/[A-Z]/,message:"Password must contain an uppercase"},{pattern:/[0-9]/,message:"Password must contain a number"}],hasFeedback:!0,children:Object(m.jsx)(F.a.Password,{name:"password",onChange:function(e){return r(e)}})}),Object(m.jsx)(P.a.Item,{name:"confirm",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject(new Error("The Passwords doesn't match!")):Promise.resolve()}}}],children:Object(m.jsx)(F.a.Password,{})}),Object(m.jsx)(P.a.Item,Object(K.a)(Object(K.a)({name:"agreement",valuePropName:"checked",rules:[{validator:function(e,t){return t?Promise.resolve():Promise.reject(new Error("Should accept agreement"))}}]},n),{},{children:Object(m.jsxs)(Y.a,{children:["I have read the ",Object(m.jsx)("a",{href:"/agreement",children:"agreement"})]})})),Object(m.jsxs)(P.a.Item,Object(K.a)(Object(K.a)({},n),{},{children:[Object(m.jsx)(f.a,{type:"primary",htmlType:"submit",loading:t,style:{marginTop:"20px"},children:t?"":"Register"}),"Or ",Object(m.jsx)(o.b,{to:"/login",children:"Login now!"})]}))]}))},Q=Object(j.i)((function(){var e=Object(s.useState)({firstName:"",lastName:"",email:"",password:""}),t=Object(O.a)(e,2),a=t[0],r=t[1],n=Object(s.useState)(!1),c=Object(O.a)(n,2),o=c[0],i=c[1],l=Object(s.useState)(!1),d=Object(O.a)(l,2),u=d[0],h=d[1],f=Object(s.useState)(""),p=Object(O.a)(f,2),x=p[0],g=p[1],v=Object(s.useContext)(C).csrfToken,y=function(e){b.defaults.headers.post["X-CSRF-Token"]=v,b.post("/api/users/register",e).then((function(e){i(!1),g(""),h(!0)})).catch((function(e){var t=e.response.data;i(!1),g(t.data.error),h(!1)}))};return u?Object(m.jsx)(j.a,{exact:!0,to:"/login"}):Object(m.jsxs)("div",{className:"register",children:[Object(m.jsx)("h1",{children:"Register"}),Object(m.jsx)(G,{loading:o,registerError:x,onFinish:function(e){e&&(i(!0),y(a))},onChangeHandler:function(e){r(Object(K.a)(Object(K.a)({},a),{},Object(J.a)({},e.target.name,e.target.value)))}})]})})),$=a(300),ee=function(e){var t=e.loading,a=e.loginError,s=e.onFinish,r=e.onChangeHandler;return Object(m.jsxs)(P.a,{style:{minWidth:"405px",fontWeight:"bold"},name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:s,children:[""!==a&&Object(m.jsx)("h4",{style:{color:"red"},children:a}),Object(m.jsx)(P.a.Item,{name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(m.jsx)(F.a,{name:"email",onChange:function(e){return r(e)},prefix:Object(m.jsx)(v.a,{className:"site-form-item-icon"}),placeholder:"Email"})}),Object(m.jsx)(P.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0,children:Object(m.jsx)(F.a,{onChange:function(e){return r(e)},name:"password",prefix:Object(m.jsx)($.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})}),Object(m.jsx)(P.a.Item,{children:Object(m.jsx)(o.b,{to:"/forgotPassword",children:"Forgot password"})}),Object(m.jsxs)(P.a.Item,{children:[Object(m.jsx)(f.a,{loading:t,type:"primary",htmlType:"submit",className:"login-form-button",children:t?"":"Log in"}),"Or ",Object(m.jsx)(o.b,{to:"/register",children:"register now!"})]})]})},te=function(){var e=Object(s.useContext)(C),t=e.setToken,a=e.csrfToken,r=Object(s.useState)({email:"",password:""}),n=Object(O.a)(r,2),c=n[0],o=n[1],i=Object(s.useState)(!1),l=Object(O.a)(i,2),d=l[0],u=l[1],h=Object(s.useState)(!1),f=Object(O.a)(h,2),p=f[0],x=f[1],g=Object(s.useState)(""),v=Object(O.a)(g,2),y=v[0],w=v[1],S=function(e){b.defaults.headers.post["X-CSRF-Token"]=a,b.post("/api/users/login",e).then((function(e){var a=e.data;a&&(u(!1),w(""),x(!0),t(a))})).catch((function(e){var t=e.response.data;u(!1),w(t.data.error),x(!1)}))};return p?Object(m.jsx)(j.a,{to:"/"}):Object(m.jsxs)("div",{className:"login",children:[Object(m.jsx)("h1",{children:"Login"}),Object(m.jsx)(ee,{loading:d,loginError:y,onFinish:function(e){u(!0),S(c)},onChangeHandler:function(e){o(Object(K.a)(Object(K.a)({},c),{},Object(J.a)({},e.target.name,e.target.value)))}})]})},ae=function(e){var t=e.editError,a=e.onFinish,s=e.onChangeHandler,r=e.form;return Object(m.jsxs)(P.a,Object(K.a)(Object(K.a)({form:r,style:{minWidth:"300px",fontWeight:"bold"}},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}}),{},{name:"register",initialValues:{remember:!0},onFinish:a,children:[""!==t&&Object(m.jsx)("h4",{style:{color:"red"},children:t}),Object(m.jsx)(P.a.Item,{name:"firstName",rules:[{required:!0,message:"Please input your First Name"},{min:2,message:"First Name should be more than 1 character"},{max:32,message:"First Name should be less than 32 character"}],children:Object(m.jsx)(F.a,{name:"firstName",onChange:function(e){return s(e)},placeholder:"First Name"})}),Object(m.jsx)(P.a.Item,{name:"lastName",rules:[{required:!0,message:"Please input your Last Name"},{min:2,message:"Last Name should be more than 1 character"},{max:32,message:"Last Name should be less than 32 character"}],children:Object(m.jsx)(F.a,{name:"lastName",onChange:function(e){return s(e)},placeholder:"Last Name"})})]}))},se=function(e){var t=e.loading,a=e.user,s=e.form,r=e.editError,n=e.onChange,c=e.onFinish,o=e.showDrawer,i=e.visible,l=e.onClose,d=e.status,j=a.fullName,u=a.email;return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("h1",{children:j}),Object(m.jsx)("p",{className:"title",children:u}),Object(m.jsx)("p",{children:Object(m.jsx)(f.a,{disabled:"active"!==d,size:"small",style:{marginBottom:"5px"},type:"primary",onClick:o,children:"Edit"})})]}),Object(m.jsx)(p.a,{title:"Edit Profile",width:250,onClose:l,visible:i,bodyStyle:{paddingBottom:80},footer:Object(m.jsxs)("div",{style:{textAlign:"right"},children:[Object(m.jsx)(f.a,{onClick:l,style:{marginRight:8},children:"Cancel"}),Object(m.jsx)(f.a,{onClick:c,type:"primary",loading:t,children:t?"":"Submit"})]}),children:Object(m.jsx)(ae,{editError:r,onChangeHandler:n,onFinish:c,form:s})})]})},re=function(){var e=P.a.useForm(),t=Object(O.a)(e,1)[0],a=Object(s.useState)({firstName:"",lastName:""}),r=Object(O.a)(a,2),n=r[0],c=r[1],o=Object(s.useState)(!1),i=Object(O.a)(o,2),l=i[0],d=i[1],j=Object(s.useState)(!1),u=Object(O.a)(j,2),h=u[0],p=u[1],x=Object(s.useState)(!1),g=Object(O.a)(x,2),v=g[0],y=g[1],w=Object(s.useState)(""),S=Object(O.a)(w,2),N=S[0],k=S[1],F=Object(s.useState)(""),E=Object(O.a)(F,2),I=E[0],A=E[1],R=Object(s.useContext)(C),z=R.status,U=R.token,_=R.userId,q=R.setFullName,B=R.fullName,D=R.email,W=R.csrfToken,H={fullName:B,email:D},X=Object(s.useState)(!1),V=Object(O.a)(X,2),Z=V[0],M=V[1];Object(s.useEffect)((function(){N&&(T.a.info({message:N}),k(""))}),[N]);var Y=function(e){y(!0),b.defaults.headers.post["X-CSRF-Token"]=W,b.post("/api/users/verifyEmail",{userId:e},{headers:{Authorization:"Bearer ".concat(U)}}).then((function(e){var t=e.data;y(!1),d(!0),k(t.data.message)})).catch((function(e){y(!1),d(!1),k("")}))},G=function(e,a){p(!0),b.defaults.headers.post["X-CSRF-Token"]=W,b.post("/api/users/changeUserDetails/".concat(a),e,{headers:{Authorization:"Bearer ".concat(U)}}).then((function(a){p(!1),A(""),q(e.firstName+" "+e.lastName),Q(),t.resetFields()})).catch((function(e){var t=e.response.data;p(!1),A(t.data.error)}))},Q=function(){M(!1)};return Object(m.jsxs)("div",{className:"profile",children:["inactive"===z&&Object(m.jsxs)("h4",{style:{textAlign:"center"},children:[" ","Please verify your email to get all features"," ",Object(m.jsx)(f.a,{loading:v,type:"link",size:"middle",style:{marginRight:20,fontSize:15},onClick:function(e){e.preventDefault(),Y(_)},children:l?"Resend":"Send"})]}),R?Object(m.jsx)(se,{form:t,user:H,status:z,loading:h,editError:I,onChange:function(e){c(Object(K.a)(Object(K.a)({},n),{},Object(J.a)({},e.target.name,e.target.value)))},onFinish:function(e){e.preventDefault(),p(!0),G(n,_)},visible:Z,showDrawer:function(){M(!0)},onClose:Q}):Object(m.jsx)("div",{className:"spin",children:Object(m.jsx)(L.a,{tip:"Loading...",size:"large"})})]})},ne=function(){var e=Object(s.useContext)(C),t=e.token,a=e.csrfToken,r=Object(s.useState)(),n=Object(O.a)(r,2),c=n[0],o=n[1],i=Object(s.useState)(!1),l=Object(O.a)(i,2),d=l[0],j=l[1],u=Object(s.useState)(""),h=Object(O.a)(u,2),f=h[0],p=h[1],x=P.a.useForm(),g=Object(O.a)(x,1)[0],v=function(e){b.defaults.headers.post["X-CSRF-Token"]=a,b.post("/api/url/generateUrl",e,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){var t=e.data;o(t.data),j(!1),p(""),g.resetFields()})).catch((function(e){var t=e.response.data;p(t.data.error),j(!1),o(void 0),g.resetFields()}))};return Object(m.jsxs)("div",{style:{marginTop:50},children:[Object(m.jsx)(E,{form:g,formSubmitHandler:function(e){if(e){var t={longUrl:e.Url};j(!0),v(t)}},loading:d,urlError:f}),c&&!d&&Object(m.jsx)(R,{url:c})]})},ce=function(e){var t=e.loading,a=e.forgotError,s=e.onFinish,r=e.onChangeHandler,n=e.form,c=e.email;return Object(m.jsxs)(P.a,{form:n,style:{minWidth:"405px",fontWeight:"bold"},name:"forgot_password",className:"login-form",initialValues:{remember:!0},onFinish:s,children:[""!==a&&Object(m.jsx)("h4",{style:{color:"red"},children:a}),Object(m.jsx)(P.a.Item,{name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(m.jsx)(F.a,{name:"email",onChange:function(e){return r(e)},prefix:Object(m.jsx)(v.a,{className:"site-form-item-icon"}),placeholder:"Email",value:c})}),Object(m.jsx)(P.a.Item,{children:Object(m.jsx)(f.a,{loading:t,type:"primary",htmlType:"submit",className:"forgot-password-button",children:t?"":"Submit"})})]})},oe=function(){var e=P.a.useForm(),t=Object(O.a)(e,1)[0],a=Object(s.useState)(""),r=Object(O.a)(a,2),n=r[0],c=r[1],o=Object(s.useState)(!1),i=Object(O.a)(o,2),l=i[0],d=i[1],j=Object(s.useState)(""),u=Object(O.a)(j,2),h=u[0],f=u[1],p=Object(s.useState)(!1),x=Object(O.a)(p,2),g=x[0],v=x[1],y=Object(s.useContext)(C).csrfToken;Object(s.useEffect)((function(){g&&T.a.info({message:"Email is sent to you. Follow the instruction."})}),[g]);var w=function(e){d(!0),b.defaults.headers.post["X-CSRF-Token"]=y,b.post("/api/users/forgotPassword",{email:e}).then((function(e){e.data&&(d(!1),f(""),v(!0),t.resetFields())})).catch((function(e){var t=e.response.data;d(!1),f(t.data.error),v(!1)}))};return Object(m.jsxs)("div",{className:"forgotPassword",children:[Object(m.jsx)("h1",{children:"Enter your email:"}),Object(m.jsx)(ce,{form:t,email:n,loading:l,forgotError:h,onFinish:function(e){w(n)},onChangeHandler:function(e){c(e.target.value)}})]})},ie=function(e){var t=e.loading,a=e.resetError,s=e.onFinish,r=e.onChangeHandler,n=e.form,c=e.password;return Object(m.jsxs)(P.a,{form:n,style:{minWidth:"405px",fontWeight:"bold"},name:"reset_password",className:"reset-form",initialValues:{remember:!0},onFinish:s,children:[""!==a&&Object(m.jsx)("h4",{style:{color:"red"},children:a}),Object(m.jsx)(P.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"},{min:6,message:"Password should be more than 5 character"},{pattern:/[A-Z]/,message:"Password must contain an uppercase"},{pattern:/[0-9]/,message:"Password must contain a number"}],hasFeedback:!0,children:Object(m.jsx)(F.a.Password,{name:"password",onChange:function(e){return r(e)},value:c})}),Object(m.jsx)(P.a.Item,{name:"confirm",label:"Confirm",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject(new Error("The Passwords doesn't match!")):Promise.resolve()}}}],children:Object(m.jsx)(F.a.Password,{})}),Object(m.jsx)(P.a.Item,{children:Object(m.jsx)(f.a,{loading:t,type:"primary",htmlType:"submit",className:"reset-password-button",children:t?"":"Submit"})})]})},le=function(){var e=Object(j.h)(),t=P.a.useForm(),a=Object(O.a)(t,1)[0],r=Object(s.useState)(""),n=Object(O.a)(r,2),c=n[0],o=n[1],i=Object(s.useState)(!1),l=Object(O.a)(i,2),d=l[0],u=l[1],h=Object(s.useState)(""),f=Object(O.a)(h,2),p=f[0],x=f[1],g=Object(s.useState)(!1),v=Object(O.a)(g,2),y=v[0],w=v[1],S=Object(s.useContext)(C).csrfToken,N=function(t){u(!0),b.defaults.headers.post["X-CSRF-Token"]=S,b.post("/api/users/resetPassword",{newPassword:t,token:e.token}).then((function(e){e.data&&(u(!1),x(""),w(!0),a.resetFields())})).catch((function(e){var t=e.response.data;u(!1),x(t.data.error),w(!1)}))};return y?(T.a.info({message:"Password changed successfully"}),Object(m.jsx)(j.a,{to:"/"})):Object(m.jsxs)("div",{className:"forgotPassword",children:[Object(m.jsx)("h1",{children:"Reset Password"}),Object(m.jsx)(ie,{password:c,form:a,loading:d,resetError:p,onFinish:function(e){N(c)},onChangeHandler:function(e){o(e.target.value)}})]})},de=function(){var e=Object(s.useContext)(C).csrfToken,t=Object(j.h)(),a=Object(s.useState)(!1),r=Object(O.a)(a,2),n=r[0],c=r[1],o=Object(s.useState)(""),i=Object(O.a)(o,2),l=i[0],d=i[1],u=Object(s.useState)(!1),h=Object(O.a)(u,2),p=h[0],x=h[1],g=function(t){c(!0),b.defaults.headers.post["X-CSRF-Token"]=e,b.post("/api/users/activate",{token:t}).then((function(e){c(!1),x(!0),d("")})).catch((function(e){var t=e.response.data;c(!1),x(!1),d(t.data.error)}))};return p?Object(m.jsx)(j.a,{to:"/"}):Object(m.jsxs)("div",{className:"verifyEmail",children:[Object(m.jsx)("h1",{children:"Activate your account"}),Object(m.jsx)(f.a,{onClick:function(e){e.preventDefault(),g(t.token)},loading:n,children:n?"":"Activate"}),l&&Object(m.jsx)("h4",{children:l})]})},je=a(293),ue=function(e){var t=e.loading,a=e.changeError,s=e.onFinish,r=e.form;return Object(m.jsxs)(P.a,{form:r,style:{minWidth:"405px",fontWeight:"bold"},name:"change_password",className:"change-form",initialValues:{remember:!0},onFinish:s,children:[""!==a&&Object(m.jsx)("h4",{style:{color:"red"},children:a}),Object(m.jsx)(P.a.Item,{name:"oldPassword",rules:[{required:!0,message:"Please input your old password!"},{min:6,message:"Old Password should be more than 5 character"},{pattern:/[A-Z]/,message:"Old Password must contain an uppercase"},{pattern:/[0-9]/,message:"Old Password must contain a number"}],hasFeedback:!0,children:Object(m.jsx)(F.a.Password,{name:"oldPassword",placeholder:"Enter Old Password"})}),Object(m.jsx)(P.a.Item,{name:"newPassword",rules:[{required:!0,message:"Please input your password!"},{min:6,message:"New Password should be more than 5 character"},{pattern:/[A-Z]/,message:"New Password must contain an uppercase"},{pattern:/[0-9]/,message:"New Password must contain a number"}],hasFeedback:!0,children:Object(m.jsx)(F.a.Password,{name:"newPassword",placeholder:"Enter New Password"})}),Object(m.jsx)(P.a.Item,{name:"confirm",dependencies:["newPassword"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("newPassword")!==a?Promise.reject(new Error("The Passwords doesn't match!")):Promise.resolve()}}}],children:Object(m.jsx)(F.a.Password,{placeholder:"Enter Confirm Password"})}),Object(m.jsx)(P.a.Item,{children:Object(m.jsx)(f.a,{loading:t,type:"primary",htmlType:"submit",className:"change-password-button",children:t?"":"Submit"})})]})},be=function(e){var t=e.loading,a=e.changeError,s=e.onFinish,r=e.form;return Object(m.jsxs)(P.a,{form:r,style:{minWidth:"405px",fontWeight:"bold"},name:"change_email",className:"change-form",initialValues:{remember:!0},onFinish:s,children:[""!==a&&Object(m.jsx)("h4",{style:{color:"red"},children:a}),Object(m.jsx)(P.a.Item,{name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(m.jsx)(F.a,{name:"email",placeholder:"Enter an Email"})}),Object(m.jsx)(P.a.Item,{children:Object(m.jsx)(f.a,{loading:t,type:"primary",htmlType:"submit",className:"change-email-button",children:t?"":"Submit"})})]})},me=function(e){var t=e.loading,a=e.deleteError,s=e.onFinish,r=e.form;return Object(m.jsxs)(P.a,{form:r,style:{minWidth:"405px",fontWeight:"bold"},name:"delete_account",className:"delete-form",initialValues:{remember:!0},onFinish:s,children:[""!==a&&Object(m.jsx)("h4",{style:{color:"red"},children:a}),Object(m.jsx)(P.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"},{min:6,message:"Password should be more than 5 character"},{pattern:/[A-Z]/,message:"Password must contain an uppercase"},{pattern:/[0-9]/,message:"Password must contain a number"}],hasFeedback:!0,children:Object(m.jsx)(F.a.Password,{name:"password",placeholder:"Enter Password"})}),Object(m.jsx)(P.a.Item,{children:Object(m.jsx)(f.a,{loading:t,type:"primary",htmlType:"submit",style:{backgroundColor:"red"},children:t?"":"Delete"})})]})},he=je.a.Panel,Oe=function(){var e=P.a.useForm(),t=Object(O.a)(e,1)[0],a=Object(s.useState)(!1),r=Object(O.a)(a,2),n=r[0],c=r[1],o=Object(s.useState)(""),i=Object(O.a)(o,2),l=i[0],d=i[1],u=Object(s.useState)(""),h=Object(O.a)(u,2),f=h[0],p=h[1],x=Object(s.useState)(""),g=Object(O.a)(x,2),v=g[0],y=g[1],w=Object(s.useState)(!1),S=Object(O.a)(w,2),N=S[0],k=S[1],F=Object(s.useState)(!1),E=Object(O.a)(F,2),I=E[0],A=E[1],R=Object(s.useContext)(C),z=R.userId,L=R.token,U=R.setStatus,_=R.setToken,q=R.csrfToken;Object(s.useEffect)((function(){N&&T.a.info({message:"Password is changed successfully"}),I&&T.a.info({message:"Email is changed successfully and confirmation email is sent"})}),[N,I]);var B=function(e,a,s){c(!0),b.defaults.headers.post["X-CSRF-Token"]=q,b.post("/api/users/changeEmail/".concat(a),{email:e},{headers:{Authorization:"Bearer ".concat(s)}}).then((function(e){c(!1),d(""),A(!0),U("inactive"),t.resetFields()})).catch((function(e){var t=e.response.data;c(!1),A(!1),d(t.data.error)}))},D=function(e,a,s,r){c(!0),b.defaults.headers.post["X-CSRF-Token"]=q,b.post("/api/users/changePassword/".concat(s),{oldPassword:e,newPassword:a},{headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){c(!1),p(""),k(!0),t.resetFields()})).catch((function(e){var t=e.response.data;c(!1),k(!1),p(t.data.error)}))},W=function(e,t,a){c(!0),b.defaults.headers.post["X-CSRF-Token"]=q,b.post("/api/users/deleteUser/".concat(t),{password:e},{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){c(!1),y(""),b.get("/api/users/logout").then((function(e){var t=e.data;return _(t),Object(m.jsx)(j.a,{to:"/"})}))})).catch((function(e){var t=e.response.data;c(!1),y(t.data.error)}))};return Object(m.jsxs)(je.a,{children:[Object(m.jsx)(he,{header:"Change Password",children:Object(m.jsx)(ue,{form:t,loading:n,changeError:f,onFinish:function(e){if(e){var t=e.oldPassword,a=e.newPassword;D(t,a,z,L)}}})},"1"),Object(m.jsx)(he,{header:"Change Email",children:Object(m.jsx)(be,{form:t,loading:n,changeError:l,onFinish:function(e){if(e){var t=e.email;B(t,z,L)}}})},"2"),Object(m.jsx)(he,{header:"Delete Account",children:Object(m.jsx)(me,{loading:n,form:t,deleteError:v,onFinish:function(e){if(e){var t=e.password;W(t,z,L)}}})},"3")]})},fe=function(e){var t=e.editError,a=e.form,s=e.setTitle,r=e.title,n=e.loading,c=e.onClickSubmitBtn;return Object(m.jsxs)(P.a,{form:a,style:{minWidth:"405px",fontWeight:"bold"},name:"edit_url",className:"edit-form",initialValues:{remember:!0},children:[""!==t&&Object(m.jsx)("h4",{style:{color:"red"},children:t}),Object(m.jsx)(P.a.Item,{name:"title",rules:[{required:!0,message:"Please input your title"}],children:Object(m.jsx)(F.a,{name:"title",placeholder:"Enter the title",onChange:function(e){return s(e.target.value)},value:r})}),Object(m.jsx)(P.a.Item,{children:Object(m.jsx)(f.a,{loading:n,type:"primary",htmlType:"submit",className:"edit-url-button",onClick:c,children:n?"":"Submit"})})]})},pe=function(){var e=Object(j.h)().urlId,t=Object(s.useState)(""),a=Object(O.a)(t,2),r=a[0],n=a[1],c=Object(s.useState)(!1),o=Object(O.a)(c,2),i=o[0],l=o[1],d=Object(s.useState)(""),u=Object(O.a)(d,2),h=u[0],f=u[1],p=Object(s.useState)(!1),x=Object(O.a)(p,2),g=x[0],v=x[1],y=P.a.useForm(),w=Object(O.a)(y,1)[0],S=Object(s.useContext)(C),N=S.token,k=S.csrfToken,F=function(e,t,a){l(!0),b.defaults.headers.patch["X-CSRF-Token"]=k,b.patch("/api/url/updateUrl/".concat(t),{title:e},{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){l(!1),f(""),v(!0)})).catch((function(e){var t=e.response.data;l(!1),f(t.data.error),v(!1)}))};return g?Object(m.jsx)(j.a,{to:"/"}):Object(m.jsxs)("div",{className:"editUrl",children:[Object(m.jsx)("h1",{children:"Edit Url"}),Object(m.jsx)(fe,{loading:i,editError:h,title:r,setTitle:n,form:w,onClickSubmitBtn:function(t){t.preventDefault(),F(r,e,N)}})]})},xe=function(){var e=Object(s.useContext)(C),t=e.token,a=e.setCsrfToken;Object(s.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var t,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/csrf-token");case 2:t=e.sent,s=t.data,a(s.csrfToken);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]);var r=Object(m.jsxs)(j.d,{children:[Object(m.jsx)(j.b,{exact:!0,path:"/",component:z}),Object(m.jsx)(j.b,{exact:!0,path:"/register",component:Q}),Object(m.jsx)(j.b,{exact:!0,path:"/login",component:te}),Object(m.jsx)(j.b,{exact:!0,path:"/forgotPassword",component:oe}),Object(m.jsx)(j.b,{exact:!0,path:"/user/password-reset/:token",component:le}),Object(m.jsx)(j.b,{exact:!0,path:"/user/activate/:token",component:de}),Object(m.jsx)(j.a,{to:"/"})]});return t&&(r=Object(m.jsxs)(j.d,{children:[Object(m.jsx)(j.b,{exact:!0,path:"/",component:M}),Object(m.jsx)(j.b,{exact:!0,path:"/profile",component:re}),Object(m.jsx)(j.b,{exact:!0,path:"/account-setting",component:Oe}),Object(m.jsx)(j.b,{exact:!0,path:"/link/create",component:ne}),Object(m.jsx)(j.b,{exact:!0,path:"/user/activate/:token",component:de}),Object(m.jsx)(j.b,{exact:!0,path:"/link/edit/:urlId",component:pe}),Object(m.jsx)(j.a,{to:"/"})]})),Object(m.jsxs)("div",{style:{paddingTop:"69px",minHeight:"calc(100vh - 80px)"},children:[Object(m.jsx)(k,{}),r,Object(m.jsx)(h,{})]})},ge=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,301)).then((function(t){var a=t.getCLS,s=t.getFID,r=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),s(e),r(e),n(e),c(e)}))};c.a.render(Object(m.jsx)(N,{children:Object(m.jsx)(o.a,{children:Object(m.jsx)(xe,{})})}),document.getElementById("root")),ge()}},[[285,1,2]]]);
//# sourceMappingURL=main.b941fda2.chunk.js.map